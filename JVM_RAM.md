### JVM内存划分

线程私有：程序计数器、java虚拟机栈、本地方法栈

线程共有：堆、方法区

1. 程序计数器

   也成为PC寄存器。JVM的字节码解释器通过改变程序计数器的值来选取下一条需要执行的字节码指令（深入理解Java虚拟机）。也就是说，这个程序计数器用来标志当前线程中顺序执行代码已经执行到了第几行。如果存在单核处理器多线程运行的情况，Java虚拟机需要在多个线程间短时间切换来达成类似多线程同步运行的效果。那么程序计数器在线程中就起到了类似指针的作用，线程暂停，计数器保存当前执行的位置。线程恢复，则从计数器所示的地方继续执行。

2. Java虚拟机栈

   也叫java栈。虚拟机栈描述的是Java方法执行的内存模型：每个方法在执行的同时都会创建一个栈帧（Stack Frame）用于存储局部变量表、操作数栈、动态链接、方法出口等信息（*从synchronized锁的基础知识来看，轻量级锁在获取锁时还会将作为锁的对象的Mark Word拷贝到栈帧的锁记录中，也就是说栈帧还用来存储锁记录，用来标记该线程拥有的锁对象*）。每一个方法从调用直至执行完成的过程，就对应着一个栈帧在虚拟机栈中从入栈到出栈的过程。

   - **局部变量表**：存放在编译期可知的基本数据类型（*boolean,byte,char,short,int,float,long,double*）,对象引用（reference类型，不等于对象本身，可能是只想对象起始地址的指针，或指向一个代表对象的句柄[操作系统层面的“指针”]或其他与此对象有关的位置）和returnAddress类型（指向一条字节码指令的地址）。

